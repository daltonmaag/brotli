language:
- objective-c
env:
  matrix:
  - INSTALL_TYPE='system' VERSION=2.7
  - INSTALL_TYPE='macpython' VERSION=2.7.10 CC=clang CXX=clang++
  - INSTALL_TYPE='macpython' VERSION=3.4.3 CC=clang CXX=clang++
  - INSTALL_TYPE='homebrew' VERSION=2.7.10
  - INSTALL_TYPE='homebrew' VERSION=3.4.3
install:
- source terryfy/travis_tools.sh
- get_python_environment $INSTALL_TYPE $VERSION venv
- pip install --upgrade wheel
script:
- python setup.py build_ext test
after_success:
- pip wheel -w dist .
before_deploy:
- cd dist
- "wheels=$(echo *.whl)"
deploy:
  provider: releases
  api_key:
    secure: "Oocy8hcsfRpdUqv4v/fzr+jFf1xwLQDn4+mx+VJKNAX5pr4i91bmd+TLv3a+iwQElwmAeOSbfZa9y0WmOumPEGSXwR5L1piiPlWsoF1leHeWJpgrkX7f72dAbHCNcwjFB4jj8wYzw4GeWERczGkh9CKpHUIx0ItuDOPjv2YmLeNTbxqjONz/f3bv4FwCEyorTdffaKDsHDtLh7dUXcxeNhmxC/vjJloqNdCMFrs0V6a6X6jY6aw6ZIZxsG909jgVb5W5Y1fItZZpcCYT5/3d9sbXZmmniDi/rJ9cvlwVy9/DDfxoO0iNSPTTQ14ucsg67YtHQNjxRW8OKvBY+DerCIaYnFlDQiPjHE7Zrf/GiRNiaXUnkaYIZZ9Rqg8E0UkTf2X3Vl7lrE5EOxNF2KpW63tFugvGZGX6I9U31TvVMEI+mnuce1PwDZKUCHtHgTxFOlvMhc15dsEOYEPBMrSTI06PVKiLXxHK5qTrdj96BS5AVAI1aoIMFPB0Ep5s+wWrP+VvNvL1tLzOt6wX4lTVkrX+wYGbRJxgltIwcuH8TQBNL6CUObYJD/GjfGZ/dGM9IpyF9Zpkg6ND/pwRsP2idm6+yyRnRZ6IwG8RQoTLKAMO8L401fJYsa3Q3LNqqv5tgxZwDO45NNxWRBDVFgpSBubrtkgSbJE0nfiWs79QO4g="
  file: $whl_file
  skip_cleanup: true
  on:
    all_branches: true
    tags: true
